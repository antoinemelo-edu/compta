<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <title>Mandat</title>
    <style>
        body {
            font-size: 12px; /* Taille de police par défaut pour les écrans plus grands */
        }
        /* Modifier la taille du placeholder */
        ::placeholder { /* Chrome, Firefox, Opera, Safari 10.1+ */
            font-size: 1.5em; /* Taille du placeholder */
            color: #999; /* Couleur du placeholder */
            opacity: 1; /* Firefox */
        }
        
        :-ms-input-placeholder { /* Internet Explorer 10-11 */
            font-size: 1.5em;
            color: #999;
        }
        
        ::-ms-input-placeholder { /* Microsoft Edge */
            font-size: 1.5em;
            color: #999;
        }
		.input-large {
			width: 300px;
			height: 30px;
			font-size: 1.2em;
			padding: 5px;
		}
        /* Modifier la taille de police du bouton submit */
        button {
            font-size: 1.5em; /* Taille de police plus grande pour le bouton */
            padding: 10px 20px; /* Ajuster le padding si nécessaire */
        }
        @media (max-width: 1180px) {
            body {
                font-size: 18px; /* Augmenter la taille de la police sur les petits écrans */
            }
            button {
                font-size: 36px; /* Augmenter la taille de la police des boutons pour une meilleure accessibilité */
                padding: 10px; /* Ajouter un peu plus d'espace autour du texte dans les boutons */
                margin-bottom: 10px; /* Ajuster l'espacement entre les boutons */
            }
        }
    </style>
</head>
<body>
    <h2>Choisir un mandat</h2>

    <?php
    // Supposons que vous avez récupéré le nom d'utilisateur via $_GET['user']
    $user = filter_input(INPUT_GET, 'user', FILTER_SANITIZE_SPECIAL_CHARS);
    $chemin = './' . $user . '/';

    // Vérifiez si le répertoire existe et listez les sous-dossiers
    if (is_dir($chemin)) {
        $dossiers = array_filter(glob($chemin . '*'), 'is_dir');
    } else {
        $dossiers = []; // Aucun dossier trouvé
    }

    // Si aucun répertoire n'existe, ajoutez "01_Creation" par défaut
    if (empty($dossiers)) {
        $dossiers = [$chemin . '01_Creation'];
    }
    ?>

    <select id="mandatSelect" name="mandat"  class="input-large">
        <?php foreach ($dossiers as $dossier): ?>
            <option value="<?php echo basename($dossier); ?>"><?php echo basename($dossier); ?></option>
        <?php endforeach; ?>
    </select>

    <button onclick="ouvrirEtape1()">Démarrer</button>

    <script>
        document.getElementById('userNameDisplay').textContent = getQueryParam('user');

        function getQueryParam(param) {
            var searchParams = new URLSearchParams(window.location.search);
            return searchParams.get(param);
        }

        function ouvrirEtape1() {
            var user = getQueryParam('user');
            var mandat = document.getElementById('mandatSelect').value;
            // Construire l'URL et rediriger
            window.location.href = 'etape1.html?user=' + encodeURIComponent(user) + '&mandat=' + encodeURIComponent(mandat);
        }
    </script>
</body>
</html>

